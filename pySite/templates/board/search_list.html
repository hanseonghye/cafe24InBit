{% extends '../base.html' %}
{% load mathfilters %}

{% block csslink %}
<link href="/assets/css/board.css" rel="stylesheet" type="text/css">
<script src="/assets/js/jquery/jquery-1.9.0.js"></script>
<script>

    $(function(){
        var jumpPage = {{ jumppage }}
        var nowPage = {{ nowPage }} -1
        var countPage = {{ countPage }}
        var pager = {{ pager }}

        var nowBigPage = (parseInt(nowPage/3))*3 +1;
        if ( nowBigPage != 1){
            $('#pager').append('<li><a href=/board/list/'+(nowBigPage -jumpPage)+'">◀</a></li>')
        }

        var isEndPage = false

        for (var i = nowBigPage; i<= (nowBigPage -1 + jumpPage); ++i){
            var str =""
            if ( i== (nowPage +1 )){
                str = '<li class="selected" id="pager-'+i+'"><a href="/board/list/'+i+'">'+i+"</a></li>"
            }else{
                str ='<li id="pager-'+i+'"><a href="/board/list/'+i+'">'+i+"</a></li>"
            }

            $('#pager').append(str)
            if (i ==pager){
                isendPage =true
                break;
            }
        } //end forloop

        if (isEndPage == false){
            $('#pager').append('<li><a href="/board/list/'+(nowBigPage+jumpPage)+'">▶</a></li>')
        }

    })



</script>
{% endblock %}

{% block content %}
<div id="board">
    <form id="search_form" action="" method="post">
        <input type="text" id="kwd" name="kwd" value="">
        <input type="submit" value="찾기">
    </form>
    <table class="tbl-ex">
        <tr>
            <th>번호</th>
            <th>제목</th>
            <th>글쓴이</th>
            <th>조회수</th>
            <th>작성일</th>
            <th>&nbsp;</th>
        </tr>

        {% for board in board_list %}
        <tr>
            {% if board.status %}
                <td>{{ board.id }}</td>
                <td style="text-align: left;"><a href="/board/view/{{ board.id }}">{{ board.title }}</a></td>
                <td>{{ board.user.name }}</td>
                <td>{{ board.hit }}</td>
                <td>{{ board.regdate | date:'Y-m-d H:i:s'}}</td>
                <td><a href="/board/delete/{{ board.id }}" class="del">삭제</a></td>
            {% endif %}
        </tr>
        {% endfor %}
    </table>

    <!-- pager 추가 -->
    <div class="pager">
        <ul id="pager"></ul>
    </div>

    <div class="bottom">
        <a href="/board/writeform" id="new-book">글쓰기</a>
    </div>
</div>
{% endblock %}